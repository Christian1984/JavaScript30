<html>
  <head>
    <link rel='stylesheet' href='style.css' />
    <title>JS Drumkit</title>
  </head>
  <body>
    <!--<h1>JS Drumkit</h1>-->
    <div class='keys'>
      <div data-key='65' class='key'>
        <kbd class='char'>A</kbd>
        <div class='instrument'>Boom</div>
      </div>

      <div data-key='83' class='key'>
        <kbd class='char'>S</kbd>
        <div class='instrument'>Kick</div>
      </div>
      
      <div data-key='68' class='key'>
        <kbd class='char'>D</kbd>
        <div class='instrument'>Snare</div>
      </div>
      
      <div data-key='70' class='key'>
        <kbd class='char'>F</kbd>
        <div class='instrument'>Clap</div>
      </div>
      
      <div data-key='71' class='key'>
        <kbd class='char'>G</kbd>
        <div class='instrument'>Tink</div>
      </div>
      
      <div data-key='72' class='key'>
        <kbd class='char'>H</kbd>
        <div class='instrument'>Tom</div>
      </div>
      
      <div data-key='74' class='key'>
        <kbd class='char'>J</kbd>
        <div class='instrument'>Ride</div>
      </div>
      
      <div data-key='75' class='key'>
        <kbd class='char'>K</kbd>
        <div class='instrument'>Open Hat</div>
      </div>
      
      <div data-key='76' class='key'>
        <kbd class='char'>L</kbd>
        <div class='instrument'>Hi-Hat</div>
      </div>
    </div>

    <audio data-key='65' src='./sounds/boom.wav' />
    <audio data-key='83' src='./sounds/kick.wav' />
    <audio data-key='68' src='./sounds/snare.wav' />
    <audio data-key='70' src='./sounds/clap.wav' />
    <audio data-key='71' src='./sounds/tink.wav' />
    <audio data-key='72' src='./sounds/tom.wav' />
    <audio data-key='74' src='./sounds/ride.wav' />
    <audio data-key='75' src='./sounds/openhat.wav' />
    <audio data-key='76' src='./sounds/hihat.wav' />

    <script>
      window.addEventListener('keydown', (e) => {
        //console.log(e.keyCode);
        let audio = document.querySelector(`audio[data-key="${e.keyCode}"]`); //the [] is called an attribute selector
        if (!audio) return;
        
        //play audio
        audio.currentTime = 0;
        audio.play();

        //animate key
        let key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
        key.classList.add('playing');
      });

      //event listener for reverting the animation
      let keys = document.querySelectorAll('.key');
      keys.forEach((key) => {
        key.addEventListener('transitionend', (e) => {
          if (e.propertyName !== 'transform') return;
          key.classList.remove('playing');
        })
      });
    </script>
  </body>
</html>